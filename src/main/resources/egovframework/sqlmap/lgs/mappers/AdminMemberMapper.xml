<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="lgs.admin.mapper.AdminMemberMapper">

	<select id="searchList" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		SELECT	MEMBER_NO
			 ,	MEMBER_ID
			 ,	MEMBER_NAME
			 ,	FN_GET_CODE_NAME('1', MEMBER_GENDER) MEMBER_GENDER
			 ,	REGEXP_REPLACE(MEMBER_PHONENUM, '(.{3})(.+)(.{4})', '\1-\2-\3') MEMBER_PHONENUM
			 ,	TO_CHAR(INSERT_DATE ,'YYYY-MM-DD') INSERT_DATE
		FROM 	MEMBER
		<where>
			<if test="id != null and id != ''">
				AND MEMBER_ID LIKE '%' || #{id} || '%'
			</if>
			<if test="name != null and name != ''">
				AND MEMBER_NAME LIKE '%' || #{name} || '%'
			</if>
			<if test="gender != null and gender != ''">
				AND MEMBER_GENDER = #{gender}
			</if>
		</where>
		ORDER BY MEMBER_NO ASC
	</select>
	
	<select id="countList" resultType="int">
		SELECT COUNT(*) AS CNT
		  FROM MEMBER
	</select>
</mapper>